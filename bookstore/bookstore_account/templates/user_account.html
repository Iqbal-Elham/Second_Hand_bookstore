{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="shortcut icon" type="image" href="{% static 'images/logo3.png' %}" />
  <link rel="stylesheet" href="{% static 'bootstrap/css/bootstrap.min.css' %}" />
  <link rel="stylesheet" href="{% static 'styles/css/user_style.css' %}">
  <link rel="stylesheet" href="{% static 'styles/fonts-6/css/all.css' %}" />
  <link rel="stylesheet" href="{% static 'styles/css/fonts.css' %}" />
  <title>User Account</title>
</head>

<body>
  <div class="row">
    <nav class="d-flex justify-content-around align-items-center px-5 py-2 gap-4 nav-bar ">
      <p class="h1 nav-brand">User Account</p>
      <div class="menu d-flex">
        <a href="/" class="d-flex align-items-center justify-content-center "><lord-icon
            src="https://cdn.lordicon.com/kxoxiwrf.json" trigger="loop-on-hover" delay="40"
            colors="primary:#545454,secondary:#c79816" style="width:50px;height:50px">
          </lord-icon><label for="logout">Home</label></a>
        <a href="/books" class="d-flex align-items-center justify-content-center "><lord-icon
            src="https://cdn.lordicon.com/hursldrn.json" trigger="loop-on-hover" delay="40"
            colors="primary:#e8b730,secondary:#545454" style="width:50px;height:50px">
          </lord-icon><label for="logout">Books</label></a>
        <a href="/logout" class="d-flex align-items-center justify-content-center "><lord-icon
            src="https://cdn.lordicon.com/moscwhoj.json" trigger="loop-on-hover" delay="40"
            colors="primary:#545454,secondary:#000000" style="width:50px;height:50px;" id="logout" name="logout">
          </lord-icon><label for="logout">log out</label></a>
      </div>
    </nav>
  </div>

  <!-- -------------------- Sidebar -------------------------------- -->
  <div class="user_sidebar col-md-2 d-flex flex-column">
    <img src="{{ user.user_profile.profile_pic.url }}" class="rounded-circle mb-4" alt="">
    <p class="text-primary mb-5 text-center h3">{{ user.username }}</p>
    <a onclick="displayPage('profile')" type="button" class="text-dark ">Profile</a>
    <a onclick="displayPage('books')" type="button" class="text-dark ">Your Books</a>
    <a onclick="displayPage('chp')" type="button" class="text-dark ">Change Password</a>
    <a onclick="displayPage('msg')" type="button" class="text-dark ">Messages</a>
  </div>

  <div class="col-md-10 content">
    <!-- ---------------------------------- Profile ----------------------------------- -->
    <div id="profile">
      <h1 class="text-center mb-5">Profile</h1>
      <form class="row" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="col-md-6" id="leftCtn">
          <div class="mb-4 d-flex justify-content-center flex-column align-items-center" id="upload-img-div">
            <img src=" {{ user.user_profile.profile_pic.url }} " width="180" height="180" class="mx-auto d-block "
              id="uploadImage" alt="..." />
              {{ editForm.profile_pic }}
            <!-- <input type="file" id="file"> -->
            <label for="file" id="uploadBtn">Choose Photo</label>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-9">
              <div class="row mb-3">
                <label for="" class="col-sm-4 col-form-label text-dark">Name</label>
                <div class="col-sm-8">
                  {{ editForm.user_name }}
                  {% for error in editForm.user_name.errors %}
                  <p style="color: rgb(209, 13, 13);margin-top: 5px;">{{error}}</p>
                  {% endfor %}
                </div>
              </div>
              <div class="row mb-3">
                <label for="" class="col-sm-4 col-form-label text-dark">Email</label>
                <div class="col-sm-8">
                  {{ editForm.email }}
                  {% for error in editForm.email.errors %}
                  <p style="color: rgb(75, 5, 5); margin-top: 5px;">{{error}}</p>
                  {% endfor %}
                </div>
              </div>
              <div class="row mb-3">
                <label for="" class="col-sm-4 col-form-label">Date of Birth</label>
                <div class="col-sm-8 dob">
                  {{ editForm.date_of_birth }}
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-6" id="rightCtn">
          <div class="row">
            <div class="col-md-2"></div>
            <div class="col-md-8">
              <div class="row mb-3">
                <label for="" class="col-sm-3 col-form-label">City</label>
                <div class="col-sm-9">
                  {{ editForm.city }}
                </div>
              </div>
              <div class="row mb-3">
                <label for="" class="col-sm-3 col-form-label">Address</label>
                <div class="col-sm-9">
                  {{ editForm.address }}
                </div>
              </div>
              <fieldset class="row mb-3">
                <legend class="col-form-label col-sm-3 pt-0">Gender</legend>
                <div class="col-sm-9 gender-radios">
                  {{ editForm.gender }}
                </div>
              </fieldset>
              <div class="row mb-3">
                <label for="" class="col-sm-3 col-form-label"><small> Phone Number</small></label>
                <div class="col-sm-9">
                  {{ editForm.phone_num }}
                </div>
              </div>
              <div class="row mb-3">
                <label for="" class="col-sm-3 col-form-label"><small> Whatsapp Number</small></label>
                <div class="col-sm-9">
                  {{ editForm.whatsapp_num }}
                </div>
              </div>
            </div>
            <div class="row d-grid gap-2 col-6 mx-auto">
            </div>
          </div>
        </div>
        <button class="btn btn-warning text-white w-50 mx-auto mt-5" type="submit">
          Save Changes
        </button>
      </form>
    </div>

    <!-- ---------------------- Change password ----------------------- -->
    <div id="change_password">
      <header class="d-flex flex-column justify-content-center gap-1 align-items-center mb-4">
        <lord-icon src="https://cdn.lordicon.com/xtrjgsiz.json" trigger="loop" delay="1500"
          colors="primary:#3a3347,secondary:#e8b730,tertiary:#e8b730" style="width:150px;height:150px">
        </lord-icon>
        <h1>Change Password</h1>
      </header>
      <form action="" class="d-flex flex-column gap-3">
        <label for="old">Old Password</label><input type="text" class="form-control w-50" name="old">
        <label for="old">New Password</label><input type="text" class="form-control w-50" name="old">
        <label for="old">Repeat new Password</label><input type="text" class="form-control w-50" name="old">
      </form>
    </div>

    <!-- --------------------------------- Books -------------------------------- -->
    <div id="books">
      <div class="bg-white p-2 m-4 rounded-5">
        <header class="wishlist-header d-flex flex-column justify-content-center align-items-center mt-5">
          <lord-icon src="https://cdn.lordicon.com/hursldrn.json" trigger="loop"
            colors="primary:#242424,secondary:#e8b730" state="loop" style="width:180px;height:180px">
          </lord-icon>
          <h1 class="display-4">My Books</h1>
        </header>
        <div class="table-contain">
          {% if wish != None and details|length > 0 %}
          <div class="border-top border-5 border-rounded">
            <table class="table table-striped wishlist-table">
              <thead>
                <tr class="text-center">
                  <th scope="col">#</th>
                  <th scope="col" class="table-pic"></th>
                  <th scope="col">Book Name</th>
                  <th scope="col">Author</th>
                  <th scope="col">Publisher</th>
                  <th scope="col">Price</th>
                  <th scope="col"></th>
                  <th scope="col"></th>
                </tr>
              </thead>
              <tbody>
                {% for detail in details %}
                <tr class="text-center align-middle">
                  <th scope="row">{{ forloop.counter }}</th>
                  <td><img src="{{ detail.wishBook.image.url }}" class="img-fluid" width="100px" height="100px" alt="">
                  </td>
                  <td>{{ detail.wishBook.title }}</td>
                  <td>{{ detail.wishBook.Author }}</td>
                  <td>{{ detail.wishBook.publisher }}</td>
                  <td>{{ detail.wishBook.price }} Af</td>
                  <td><a href="{{ detail.wishBook.get_absolute_url }}"><button
                        class="w-75 btn btn-warning text-white btn-block rounded-5">More Details</button></a></td>
                  <td>
                    <a href="/remove-wishlist-item/{{ detail.id }}"> <lord-icon
                        src="https://cdn.lordicon.com/qjwkduhc.json" trigger="loop-on-hover" delay="300"
                        colors="primary:#646e78,secondary:#545454,tertiary:#e8b730" style="width:70px;height:70px">
                      </lord-icon></a>
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
            {% else %}
            <div class="alert alert-warning">
              <p>Your Wish List Is Empty</p>
            </div>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src=" {% static 'styles/js/user_script.js' %} "></script>
  <script src=" {% static 'styles/js/jquery-3.6.0.js' %} "></script>
  <script src=" {% static 'bootstrap/js/bootstrap.min.js' %} "></script>
  <script src="https://cdn.lordicon.com/qjzruarw.js"></script>
</body>

</html>